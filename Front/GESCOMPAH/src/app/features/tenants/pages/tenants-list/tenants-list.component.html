<!-- Loading -->
<ng-container *ngIf="loading(); else content">
  <div class="d-flex justify-content-center mt-4">
    <mat-spinner></mat-spinner>
  </div>
</ng-container>

<!-- Contenido -->
<ng-template #content>
  <app-generic-table
    [data]="tenants()"
    [columns]="columns"
    titulo="GestiÃ³n de Usuario"
    subTitulo="Gesione los usuarios del sistema"
    [createButtonLabel]="'Crear Usuario'"
    [showViewButton]="false"
    (create)="onCreate()"
    (edit)="onEdit($event)"
    (delete)="onDelete($event)"
    (view)="onView($event)">
  </app-generic-table>
</ng-template>

<!-- Template columna Usuario -->
<ng-template #userTemplate let-row>
  <div class="fw-medium">{{ row.personName }}</div>
  <small class="text-muted">{{ row.email }}</small>
</ng-template>

<!-- Template columna Estado -->
<ng-template #estadoTemplate let-row>
  <div class="d-inline-flex align-items-center gap-3 flex-nowrap">
    <span class="badge align-middle" [ngClass]="row.active ? 'badge-success--solid' : 'badge-warning'">
      {{ row.active ? 'Activo' : 'Inactivo' }}
    </span>

    <div *appHasRoleAndPermission="'Administrador'; perms: 'EDITAR'">
      <app-toggle-button-component
        class="align-middle"
        [checked]="!!row.active"
        [disabled]="loading()"
        (changed)="onToggleActive(row.id, $event)" 
        [size]="20"
        [onColor]="'#388E3C'"
        [offColor]="'#9CA3AF'"
        [thumb]="'#ffffff'">
      </app-toggle-button-component>
    </div>
  </div>
</ng-template>
