<div class="container-fluid min-vh-100 d-flex align-items-center justify-content-center py-4">
  <div class="container-xl">
    <div class="row justify-content-center align-items-center min-vh-90">

      <!-- Logo -->
      <div class="col-12 col-lg-6 d-flex justify-content-center mb-4 mb-lg-0">
        <div class="text-center">
          <div class="mb-3">
            <img src="../../../../../..//public/Escudo-palermo.png" alt="Logo" class="imagen-logo" decoding="async">
          </div>
          <div>
            <h2 class="text-green fw-bolder mb-2">GESCOMPAH</h2>
            <p class="text-marmol fs-5 fw-semibold mb-1">Sistema de Gestión Comercial</p>
            <p class="text-marmol fs-6 mb-0">Alcaldía de Palermo, Huila</p>
          </div>
        </div>
      </div>

      <!-- Formulario -->
      <div class="col-12 col-md-8 col-lg-6 col-xl-5">
        <div class="form p-4 border-green shadow-sm">
          <!-- Encabezado -->
          <div class="text-start mb-4">
            <h4 class="text-green fw-medium mb-2">Iniciar Sesión</h4>
            <p class="text-marmol mb-0">Ingrese sus credenciales para acceder al sistema</p>
          </div>

          <!-- Formulario -->
          <form [formGroup]="formLogin" (ngSubmit)="login()" novalidate>

            <!-- Email -->
            <div class="mb-3">
              <label for="email" class="form-label texto fw-medium text-green">Correo Electrónico</label>
              <input type="email" id="email" class="form-control border-green" formControlName="email"
                placeholder="carlos.garcia@gmail.com" (blur)="onEmailBlur()"
                [class.is-invalid]="formLogin.get('email')?.invalid && formLogin.get('email')?.touched"
                [attr.aria-invalid]="formLogin.get('email')?.invalid ? 'true' : null" autocomplete="username" />

              <div class="invalid-feedback d-block"
                *ngIf="formLogin.get('email')?.touched && formLogin.get('email')?.errors as e">
                <ng-container *ngIf="e['required']">El correo es obligatorio.</ng-container>
                <ng-container *ngIf="e['email']">Ingresa un correo válido (ej. usuario&#64;dominio.com).</ng-container>
                <ng-container *ngIf="e['maxlength']">El correo no puede superar 254 caracteres.</ng-container>
                <ng-container *ngIf="e['onlySpaces']">El correo no puede ser solo espacios.</ng-container>
                <ng-container *ngIf="e['pattern']">Ingresa un correo completo con dominio y TLD (ej.
                  usuario&#64;dominio.com).</ng-container>
              </div>
            </div>

            <!-- Password -->
            <div class="mb-3">
              <label for="password" class="form-label texto fw-medium text-green">Contraseña</label>
              <div class="input-group">
                <input [type]="passwordVisible ? 'text' : 'password'" id="password" class="form-control border-green"
                  formControlName="password" placeholder="••••••••"
                  [class.is-invalid]="formLogin.get('password')?.invalid && formLogin.get('password')?.touched"
                  [attr.aria-invalid]="formLogin.get('password')?.invalid ? 'true' : null" autocomplete="current-password" />
                <button class="btn btn-outline-secondary" type="button" (click)="togglePasswordVisibility()">
                  <i class="fa-regular" [class.fa-eye-slash]="!passwordVisible" [class.fa-eye]="passwordVisible"></i>
                </button>
              </div>

              <!-- Mensajes específicos -->
              <div class="invalid-feedback d-block"
                *ngIf="formLogin.get('password')?.touched && formLogin.get('password')?.errors as e">
                <ng-container *ngIf="e['required']">La contraseña es obligatoria.</ng-container>
                <ng-container *ngIf="e['minlength']">La contraseña debe tener al menos 6 caracteres.</ng-container>
                <ng-container *ngIf="e['maxlength']">La contraseña no puede superar 128 caracteres.</ng-container>
                <ng-container *ngIf="e['onlySpaces']">La contraseña no puede ser solo espacios.</ng-container>
                <ng-container *ngIf="e['pattern']">
                  Debe incluir mayúsculas, minúsculas y números (mín. 8).
                </ng-container>
              </div>
            </div>

            <div class="mb-3 text-end">
              <a [routerLink]="['../password_reset']" class="small link-secondary">¿Olvidaste tu contraseña?</a>
            </div>

            <button type="submit" class="btn btn-green w-100" [disabled]="formLogin.invalid || formLogin.pending">
              Iniciar Sesión
            </button>

          </form>

        </div>
      </div>

    </div>
  </div>
</div>
