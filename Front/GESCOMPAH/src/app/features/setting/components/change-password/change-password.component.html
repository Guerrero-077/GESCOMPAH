<div class="container">


  <form [formGroup]="form" (ngSubmit)="onSubmit()" class="p-4 max-w-md mx-auto space-y-4">

    <!-- üîí Contrase√±a actual -->
    <div class="mb-3">
      <label for="currentPassword" class="form-label texto fw-medium text-green">Contrase√±a actual</label>
      <div class="input-group">
        <input [type]="passwordVisible ? 'text' : 'password'" id="currentPassword" class="form-control border-green"
          formControlName="currentPassword" placeholder="Contrase√±a actual"
          [class.is-invalid]="form.get('currentPassword')?.invalid && form.get('currentPassword')?.touched"
          [attr.aria-invalid]="form.get('currentPassword')?.invalid ? 'true' : null" />
        <button class="btn btn-outline-secondary" type="button" (click)="togglePasswordVisibility()">
          <i class="fa-regular" [class.fa-eye-slash]="!passwordVisible" [class.fa-eye]="passwordVisible"></i>
        </button>
      </div>
      <div class="invalid-feedback d-block"
        *ngIf="form.get('currentPassword')?.touched && form.get('currentPassword')?.errors as e">
        <ng-container *ngIf="e['required']">La contrase√±a actual es obligatoria.</ng-container>
        <ng-container *ngIf="e['incorrect']">La contrase√±a actual es incorrecta.</ng-container>
      </div>
    </div>

    <!-- üÜï Nueva contrase√±a -->
    <div class="mb-3">
      <label for="newPassword" class="form-label texto fw-medium text-green">Nueva contrase√±a</label>
      <div class="input-group">
        <input [type]="passwordVisible ? 'text' : 'password'" id="newPassword" class="form-control border-green"
          formControlName="newPassword" placeholder="Nueva contrase√±a"
          [class.is-invalid]="form.get('newPassword')?.invalid && form.get('newPassword')?.touched"
          [attr.aria-invalid]="form.get('newPassword')?.invalid ? 'true' : null" />
        <button class="btn btn-outline-secondary" type="button" (click)="togglePasswordVisibility()">
          <i class="fa-regular" [class.fa-eye-slash]="!passwordVisible" [class.fa-eye]="passwordVisible"></i>
        </button>
      </div>
      <div class="invalid-feedback d-block"
        *ngIf="form.get('newPassword')?.touched && form.get('newPassword')?.errors as e">
        <ng-container *ngIf="e['required']">La nueva contrase√±a es obligatoria.</ng-container>
        <ng-container *ngIf="e['minlength']">Debe tener al menos 8 caracteres.</ng-container>
        <ng-container *ngIf="e['upper']">Debe incluir al menos una letra may√∫scula.</ng-container>
        <ng-container *ngIf="e['lower']">Debe incluir al menos una letra min√∫scula.</ng-container>
        <ng-container *ngIf="e['digit']">Debe incluir al menos un n√∫mero.</ng-container>
        <ng-container *ngIf="e['symbol']">Debe incluir al menos un s√≠mbolo.</ng-container>
      </div>
    </div>

    <!-- ‚úÖ Confirmar contrase√±a -->
    <div class="mb-3">
      <label for="confirmPassword" class="form-label texto fw-medium text-green">Confirmar contrase√±a</label>
      <div class="input-group">
        <input [type]="passwordVisible ? 'text' : 'password'" id="confirmPassword" class="form-control border-green"
          formControlName="confirmPassword" placeholder="Confirmar contrase√±a"
          [class.is-invalid]="form.get('confirmPassword')?.invalid && form.get('confirmPassword')?.touched || form.hasError('notMatching')"
          [attr.aria-invalid]="form.get('confirmPassword')?.invalid ? 'true' : null" />
        <button class="btn btn-outline-secondary" type="button" (click)="togglePasswordVisibility()">
          <i class="fa-regular" [class.fa-eye-slash]="!passwordVisible" [class.fa-eye]="passwordVisible"></i>
        </button>
      </div>
      <div class="invalid-feedback d-block"
        *ngIf="form.get('confirmPassword')?.touched || form.hasError('notMatching')">
        <ng-container *ngIf="form.get('confirmPassword')?.hasError('required')">Confirmar contrase√±a es
          obligatorio.</ng-container>
        <ng-container *ngIf="form.hasError('notMatching')">Las contrase√±as no coinciden.</ng-container>
      </div>
    </div>

    <!-- Bot√≥n de acci√≥n -->
    <button type="submit" class="btn w-100" [disabled]="form.invalid || form.pending">
      Cambiar contrase√±a
    </button>
  </form>
</div>
