<form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div *ngFor="let field of config.fields" class="form-group mb-3">
        <label [for]="field.name">{{ field.label }}</label>

        <!-- Text-based inputs -->
        <input *ngIf="['text', 'email', 'password', 'number', 'date'].includes(field.type)" [type]="field.type"
            [id]="field.name" [formControlName]="field.name" [placeholder]="field.placeholder" class="form-control" />

        <!-- Textarea -->
        <textarea *ngIf="field.type === 'textarea'" [id]="field.name" [formControlName]="field.name"
            [placeholder]="field.placeholder" class="form-control"></textarea>

        <!-- Select -->
        <select *ngIf="field.type === 'select'" [id]="field.name" [formControlName]="field.name" class="form-control">
            <option value="">Seleccione</option>
            <option *ngFor="let opt of field.options" [value]="opt.value">{{ opt.label }}</option>
        </select>

        <!-- Checkbox -->
        <div *ngIf="field.type === 'checkbox'" class="form-check">
            <input type="checkbox" class="form-check-input" [id]="field.name" [formControlName]="field.name" />
            <label class="form-check-label" [for]="field.name">{{ field.label }}</label>
        </div>

        <!-- Radio -->
        <div *ngIf="field.type === 'radio'">
            <div *ngFor="let opt of field.options" class="form-check">
                <input type="radio" class="form-check-input" [formControlName]="field.name" [value]="opt.value"
                    [id]="field.name + '_' + opt.value" />
                <label class="form-check-label" [for]="field.name + '_' + opt.value">{{ opt.label }}</label>
            </div>
        </div>

        <!-- Error display -->
        <div *ngIf="form.controls[field.name].invalid && form.controls[field.name].touched" class="text-danger mt-1">
            <div *ngIf="form.controls[field.name].errors?.['required']">Este campo es obligatorio.</div>
            <div *ngIf="form.controls[field.name].errors?.['minlength']">Mínimo {{ field.validations?.minLength }}
                caracteres.</div>
            <div *ngIf="form.controls[field.name].errors?.['maxlength']">Máximo {{ field.validations?.maxLength }}
                caracteres.</div>
            <div *ngIf="form.controls[field.name].errors?.['pattern']">Formato inválido.</div>

        </div>
    </div>

    <button type="submit" class="btn btn-primary">
        {{ config.submitButtonLabel || 'Enviar' }}
    </button>
</form>