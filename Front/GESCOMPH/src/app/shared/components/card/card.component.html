<div class="local-card bg-white rounded-2">
  <!-- Contenedor de imagen -->
  <div class="image-container w-100 position-relative">
    <img *ngIf="isCloudinary; else plainImg"
         [ngSrc]="cloudinaryPath"
         width="260" height="130" [alt]="local.name"
         class="local-image" loading="lazy">
    <ng-template #plainImg>
      <img [src]="primaryImage" width="260" height="130" [alt]="local.name" class="local-image" loading="lazy">
    </ng-template>

    <!-- Tag de disponibilidad -->
    <div *ngIf="showAvailableTag && local.active" class="availability-tag">
      Disponible
    </div>
    <div *ngIf="showAvailableTag && !local.active" class="availability-tag unavailable">
      Ocupado
    </div>
  </div>

  <!-- Contenido de la tarjeta -->
  <div class="card-content">
    <!-- Nombre del local -->
    <h3 class="local-name">{{ local.name }}</h3>

    <!-- Descripción -->
    <p class="description" *ngIf="shortDescription as desc">{{ desc }}</p>

    <!-- Información en dos columnas: Dirección y Área -->
    <div class="info-grid">
      <div class="info-item">
        <span class="info-label">Dirección</span>
        <span class="info-value ellipsis">{{ local.address }}</span>
      </div>

      <div class="info-item text-end">
        <span class="info-label">Área</span>
        <!-- Formato con separador de miles, sin decimales -->
        <span class="info-value">{{ local.areaM2 | number:'1.0-0' }} m²</span>
      </div>
    </div>

    <hr class="card-divider" />

    <!-- Precio y Acciones -->
    <div class="d-flex justify-content-between align-items-center footer">
      <div class="rent-section">
        <span class="rent-label">Precio</span>
        <div class="rent-price">{{ formattedRent }}</div>
      </div>

      <!-- Botones de acción -->
      <app-button (onView)="handleView()" (onEdit)="handleEdit()" (onDelete)="handleDelete()" (onCreateAppointment)="handleCreateAppointment()">
      </app-button>
    </div>
  </div>
</div>
